enum ScheduleStatus {
    scheduled
    confirmed
    inProgress
    completed
    cancelled
    toBeRescheduled
}

/// 
/// Schedule
/// 
// prisma.schema

model Schedule {
    id           Int            @id @default(autoincrement())
    status       ScheduleStatus @default(scheduled)
    notes        String?
    cancelReason String?

    // Unificar data e hora em um único campo DateTime
    // Ex: 2025-10-20T10:00:00.000Z
    // Isso representa o INÍCIO do bloco de agendamento.
    scheduleDateTime DateTime

    // Pacient
    pacient   Pacient @relation(fields: [pacientId], references: [id])
    pacientId Int

    // Health Professional
    healthProfessional   HealthProfessional @relation(fields: [healthProfessionalId], references: [id])
    healthProfessionalId Int

    // Health Professional Scale
    healthProfessionalScale   HealthProfessionalScale @relation(fields: [healthProfessionalScaleId], references: [id])
    healthProfessionalScaleId Int

    // Audit fields
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    isActive  Boolean  @default(true)

    // Registered by recepcionist
    recepcionist   Recepcionist? @relation(fields: [recepcionistId], references: [id])
    recepcionistId Int?

    // Registered by admin
    admin               Admin?               @relation(fields: [adminId], references: [id])
    adminId             Int?
    ConsultationHistory ConsultationHistory?

    // Manter índices para otimizar buscas é uma ótima prática.
    @@index([healthProfessionalId, scheduleDateTime])
    @@index([pacientId, scheduleDateTime])
    @@index([status, scheduleDateTime])
}
